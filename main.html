<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title data-translate="pageTitle">ุงูุฎุจูุฑ ุงููุญุงุณุจู</title>
<link rel="stylesheet" href="main.css">
<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='90' height='90' x='5' y='5' fill='%230a6efd' rx='15'/><text y='68' x='50' font-size='60' fill='white' text-anchor='middle' font-weight='bold'>+</text><circle cx='75' cy='25' r='20' fill='%23198754'/><text y='34' x='75' font-size='30' fill='white' text-anchor='middle' font-weight='bold'>โ</text></svg>">
</head>
<body>
<div class="wrap">
  <div class="card">
    <div class="no-print">
      <div class="header-controls">
        <h1 data-translate="pageTitle">ุงูุฎุจูุฑ ุงููุญุงุณุจู</h1>
        <div class="header-buttons">
          <span id="welcomeUser" class="welcome-user"></span>
          <button class="btn secondary" id="langToggleBtn">English</button>
          <button class="btn danger" id="logoutBtn" data-translate="logoutBtn">ุฎุฑูุฌ</button>
        </div>
      </div>

      <div class="tabs-nav">
        <button class="tab-btn active" data-tab="invoiceTab" data-translate="invoiceTab">ูุจูุนุงุช</button>
        <button class="tab-btn" data-tab="purchasesTab" data-translate="purchasesTab">ูุดุชุฑูุงุช</button>
        <button class="tab-btn" data-tab="receiptTab" data-translate="receiptTab">ุณูุฏุงุช</button>
        <button class="tab-btn" data-tab="itemsTab" data-translate="itemsTab">ุฃุตูุงู</button>
        <button class="tab-btn" data-tab="customersTab" data-translate="customersTab">ุนููุงุก</button>
        <button class="tab-btn" data-tab="suppliersTab" data-translate="suppliersTab">ููุฑุฏูู</button>
        <button class="tab-btn" data-tab="reportsTab" data-translate="reportsTab">ุชูุงุฑูุฑ</button>
        <button class="tab-btn" data-tab="settingsTab" data-translate="settingsTab">ุฅุนุฏุงุฏุงุช</button>
      </div>

      <!-- SALES TAB -->
      <div id="invoiceTab" class="tab-content active">
        <div class="sub-tabs-nav">
          <button class="sub-tab-btn active" data-tab="createInvoice" data-parent="invoiceTab">ุฅูุดุงุก ูุงุชูุฑุฉ</button>
          <button class="sub-tab-btn" data-tab="invoiceLog" data-parent="invoiceTab">ุณุฌู ุงูููุงุชูุฑ</button>
        </div>
        <div id="createInvoice" class="sub-tab-content active">
          <div class="actions">
            <button class="btn" id="newInvoiceBtn">โ ุฌุฏูุฏ</button>
            <button class="btn success" id="generateBtn">๐พ ุญูุธ</button>
          </div>
          <div class="form-section">
            <div class="row">
              <div class="col">
                  <label>ุฑูู ุงููุงุชูุฑุฉ</label>
                  <input id="invoiceNumber" type="text">
                  <span id="invoiceNumHint" class="hint-text"></span>
              </div>
              <div class="col"><label>ุงูุชุงุฑูุฎ</label><input id="invoiceDate" type="datetime-local"></div>
            </div>
            <div class="row">
              <div class="col customer-col">
                <label>ุงูุนููู</label>
                <input id="customerName" type="text" list="customersDatalist">
                <div id="customerDebtDetails" class="debt-details-box"></div>
              </div>
              <div class="col"><label>ุงูุฑูู ุงูุถุฑูุจู</label><input id="customerTaxNumber" type="text" readonly></div>
            </div>
          </div>
          <div class="form-section">
            <table class="items-table">
                <thead><tr><th style="width:40%">ุงูุตูู</th><th>ุงููููุฉ</th><th>ุงูุณุนุฑ</th><th>ุงูุฅุฌูุงูู</th><th>X</th></tr></thead>
                <tbody id="itemsBody"></tbody>
            </table>
            <button class="btn small-action" id="addItemBtn">โ ุตูู</button>
            <div class="summary">
              <p>ุงูุฅุฌูุงูู: <strong id="subTotal">0.00</strong> | ุงูุถุฑูุจุฉ: <strong id="vatTotal">0.00</strong> | <strong>ุงูููู: <span id="grandTotal">0.00</span></strong></p>
            </div>
          </div>
        </div>
        <div id="invoiceLog" class="sub-tab-content"><table class="log-table" id="invoiceLogTable"><thead><tr><th>ุฑูู</th><th>ุชุงุฑูุฎ</th><th>ุนููู</th><th>ูุจูุบ</th><th>ุฅุฌุฑุงุก</th></tr></thead><tbody id="invoiceLogBody"></tbody></table></div>
      </div>

      <!-- PURCHASES TAB -->
      <div id="purchasesTab" class="tab-content">
        <div class="sub-tabs-nav">
            <button class="sub-tab-btn active" data-tab="createPurchase" data-parent="purchasesTab">ุชุณุฌูู ูุงุชูุฑุฉ ุดุฑุงุก</button>
            <button class="sub-tab-btn" data-tab="purchaseLog" data-parent="purchasesTab">ุณุฌู ุงููุดุชุฑูุงุช</button>
        </div>
        <div id="createPurchase" class="sub-tab-content active">
            <div class="actions">
                <button class="btn" id="newPurchaseBtn">โ ุฌุฏูุฏ</button>
                <button class="btn success" id="savePurchaseBtn">๐พ ุญูุธ ุงูุดุฑุงุก</button>
            </div>
            <div class="form-section">
                <div class="row">
                    <div class="col"><label>ุฑูู ูุงุชูุฑุฉ ุงูููุฑุฏ</label><input id="purchaseNumber" type="text"></div>
                    <div class="col"><label>ุงูุชุงุฑูุฎ</label><input id="purchaseDate" type="datetime-local"></div>
                </div>
                <div class="row">
                    <div class="col customer-col">
                        <label>ุงูููุฑุฏ</label>
                        <input id="supplierName" type="text" list="suppliersDatalist">
                    </div>
                </div>
            </div>
            <div class="form-section">
                <table class="items-table">
                    <thead><tr><th style="width:40%">ุงูุตูู</th><th>ุงููููุฉ</th><th>ุชูููุฉ ุงููุญุฏุฉ</th><th>ุงูุฅุฌูุงูู</th><th>X</th></tr></thead>
                    <tbody id="purchaseItemsBody"></tbody>
                </table>
                <button class="btn small-action" id="addPurchaseItemBtn">โ ุตูู</button>
                <div class="summary">
                    <p>ุงูุฅุฌูุงูู: <strong id="purchaseSubTotal">0.00</strong> | ุงูุถุฑูุจุฉ: <strong id="purchaseVatTotal">0.00</strong> | <strong>ุงูููู: <span id="purchaseGrandTotal">0.00</span></strong></p>
                </div>
            </div>
        </div>
        <div id="purchaseLog" class="sub-tab-content">
            <table class="log-table"><thead><tr><th>ุฑูู</th><th>ุชุงุฑูุฎ</th><th>ููุฑุฏ</th><th>ูุจูุบ</th><th>ุฅุฌุฑุงุก</th></tr></thead><tbody id="purchaseLogBody"></tbody></table>
        </div>
      </div>

      <!-- RECEIPTS TAB -->
      <div id="receiptTab" class="tab-content">
        <div class="sub-tabs-nav">
          <button class="sub-tab-btn active" data-tab="createReceipt" data-parent="receiptTab">ุฅูุดุงุก ุณูุฏ</button>
          <button class="sub-tab-btn" data-tab="receiptLog" data-parent="receiptTab">ุณุฌู ุงูุณูุฏุงุช</button>
        </div>
        <div id="createReceipt" class="sub-tab-content active">
           <div class="actions">
            <button class="btn" id="newReceiptBtn">โ ุฌุฏูุฏ</button>
            <button class="btn success" id="saveReceiptBtn">๐พ ุญูุธ ุงูุณูุฏ</button>
          </div>
          <div class="form-section">
            <div class="row"><div class="col"><label>ุฑูู ุงูุณูุฏ</label><input id="receiptNumber" type="text"></div><div class="col"><label>ุงูุชุงุฑูุฎ</label><input id="receiptDate" type="datetime-local"></div></div>
             <div class="row">
                <div class="col customer-col">
                  <label>ุงูุนููู</label>
                  <input id="receiptCustomerName" type="text" list="customersDatalist">
                </div>
                <div class="col"><label>ุงููุจูุบ</label><input id="amountReceived" type="number" placeholder="0.00"></div>
             </div>
             <div class="row"><div class="col"><label>ุทุฑููุฉ ุงูุฏูุน</label><select id="paymentMethod"><option value="Cash">ููุฏู</option><option value="Bank Transfer">ุชุญููู ุจููู</option><option value="Credit Card">ุดุจูุฉ</option></select></div></div>
             <div class="row"><div class="col"><label>ุงููุตู</label><input id="receiptDescription"></div></div>
          </div>
        </div>
        <div id="receiptLog" class="sub-tab-content"><table class="log-table"><thead><tr><th>ุฑูู</th><th>ุชุงุฑูุฎ</th><th>ุนููู</th><th>ูุจูุบ</th><th>ุฅุฌุฑุงุก</th></tr></thead><tbody id="receiptLogBody"></tbody></table></div>
      </div>

      <!-- ITEMS TAB -->
      <div id="itemsTab" class="tab-content">
        <div class="sub-tabs-nav"><button class="sub-tab-btn active" data-tab="createItem" data-parent="itemsTab">ุฅุฏุงุฑุฉ ุงูุฃุตูุงู</button></div>
        <div id="createItem" class="sub-tab-content active">
            <div class="row"><div class="col"><label>ุงุณู ุงูุตูู</label><input id="itemName" type="text"></div><div class="col"><label>ุณุนุฑ ุงูุจูุน</label><input id="itemPrice" type="number"></div></div>
            <div class="actions" style="margin-top:10px"><button class="btn success" id="saveItemBtn">๐พ ุญูุธ</button><button class="btn secondary" id="clearItemFormBtn">โ ุฌุฏูุฏ</button></div>
            <h3 style="margin-top:20px">ุณุฌู ุงูุฃุตูุงู</h3>
            <table class="log-table"><thead><tr><th>ุงูุงุณู</th><th>ุงูุณุนุฑ</th><th>ูุจุงุน</th><th>ุฅุฌุฑุงุก</th></tr></thead><tbody id="itemsLogBody"></tbody></table>
        </div>
      </div>
      
      <!-- CUSTOMERS TAB -->
      <div id="customersTab" class="tab-content">
        <div class="sub-tabs-nav"><button class="sub-tab-btn active" data-tab="createCustomer" data-parent="customersTab">ุฅุฏุงุฑุฉ ุงูุนููุงุก</button></div>
        <div id="createCustomer" class="sub-tab-content active">
            <div class="row"><div class="col"><label>ุงูููุฏ</label><input id="custCode"></div><div class="col"><label>ุงูุงุณู</label><input id="custName"></div><div class="col"><label>ุงูุถุฑูุจู</label><input id="custTaxNumber"></div><div class="col"><label>ุงููุงุชู</label><input id="custPhone"></div></div>
            <label style="margin-top:10px; color:var(--accent);">ุงูุนููุงู ุงููุทูู (ูุงูู ุงูุชูุงุตูู)</label>
            <div class="address-grid">
                <input id="custCity" placeholder="ุงููุฏููุฉ">
                <input id="custDistrict" placeholder="ุงูุญู">
                <input id="custStreet" placeholder="ุงูุดุงุฑุน">
                <input id="custBuild" placeholder="ุฑูู ุงููุจูู">
                <input id="custZip" placeholder="ุงูุฑูุฒ ุงูุจุฑูุฏู">
                <input id="custAddNo" placeholder="ุงูุฑูู ุงูุฅุถุงูู">
            </div>
            <div class="actions" style="margin-top:10px"><button class="btn success" id="saveCustomerBtn">๐พ ุญูุธ</button><button class="btn secondary" id="clearCustomerFormBtn">โ ุฌุฏูุฏ</button></div>
            <h3 style="margin-top:20px">ุณุฌู ุงูุนููุงุก</h3>
            <table class="log-table"><thead><tr><th>ุงูููุฏ</th><th>ุงูุงุณู</th><th>ุงููุงุชู</th><th>ุงูุฑุตูุฏ</th><th>ุฅุฌุฑุงุก</th></tr></thead><tbody id="customersLogBody"></tbody></table>
        </div>
      </div>

      <!-- SUPPLIERS TAB -->
      <div id="suppliersTab" class="tab-content">
        <div class="sub-tabs-nav"><button class="sub-tab-btn active" data-tab="createSupplier" data-parent="suppliersTab">ุฅุฏุงุฑุฉ ุงูููุฑุฏูู</button></div>
        <div id="createSupplier" class="sub-tab-content active">
            <div class="row"><div class="col"><label>ุงูููุฏ</label><input id="supCode"></div><div class="col"><label>ุงุณู ุงูููุฑุฏ</label><input id="supName"></div><div class="col"><label>ุงูุถุฑูุจู</label><input id="supTaxNumber"></div><div class="col"><label>ุงููุงุชู</label><input id="supPhone"></div></div>
            <label style="margin-top:10px; color:var(--accent);">ุงูุนููุงู ุงููุทูู (ูุงูู ุงูุชูุงุตูู)</label>
            <div class="address-grid">
                <input id="supCity" placeholder="ุงููุฏููุฉ">
                <input id="supDistrict" placeholder="ุงูุญู">
                <input id="supStreet" placeholder="ุงูุดุงุฑุน">
                <input id="supBuild" placeholder="ุฑูู ุงููุจูู">
                <input id="supZip" placeholder="ุงูุฑูุฒ ุงูุจุฑูุฏู">
                <input id="supAddNo" placeholder="ุงูุฑูู ุงูุฅุถุงูู">
            </div>
            <div class="actions" style="margin-top:10px"><button class="btn success" id="saveSupplierBtn">๐พ ุญูุธ</button><button class="btn secondary" id="clearSupplierFormBtn">โ ุฌุฏูุฏ</button></div>
            <h3 style="margin-top:20px">ุณุฌู ุงูููุฑุฏูู</h3>
            <table class="log-table"><thead><tr><th>ุงูููุฏ</th><th>ุงูุงุณู</th><th>ุงููุงุชู</th><th>ุงูุฑุตูุฏ</th><th>ุฅุฌุฑุงุก</th></tr></thead><tbody id="suppliersLogBody"></tbody></table>
        </div>
      </div>

      <!-- REPORTS TAB -->
      <div id="reportsTab" class="tab-content">
          <div class="report-controls">
              <div class="row">
                  <div class="col"><label>ููุน ุงูุชูุฑูุฑ</label>
                      <select id="reportType">
                          <option value="sales">ุชูุฑูุฑ ุงููุจูุนุงุช</option>
                          <option value="purchases">ุชูุฑูุฑ ุงููุดุชุฑูุงุช</option>
                          <option value="inventory">ุญุฑูุฉ ุงููุฎุฒูู</option>
                          <option value="collections">ุงูุชุญุตููุงุช</option>
                          <option value="customerDebts">ูุฏููููุฉ ุงูุนููุงุก</option>
                      </select>
                  </div>
                  <div class="col"><label>ูู ุชุงุฑูุฎ</label><input type="date" id="reportStartDate"></div>
                  <div class="col"><label>ุฅูู ุชุงุฑูุฎ</label><input type="date" id="reportEndDate"></div>
                  <div class="col" style="display:flex; align-items:flex-end; gap:5px">
                      <button class="btn success" id="generateReportBtn">ุนุฑุถ ุงูุชูุฑูุฑ</button>
                      <button class="btn secondary" id="exportExcelBtn">Excel</button>
                      <button class="btn warning" id="printReportBtn">ุทุจุงุนุฉ ุงูุชูุฑูุฑ</button>
                  </div>
              </div>
          </div>
          <div id="reportResultsArea" class="report-preview-container">
              <div id="reportHeader" style="text-align:center; display:none; margin-bottom:20px;">
                  <h2 id="reportTitleDisplay"></h2>
                  <p id="reportDateRangeDisplay" class="small"></p>
              </div>
              <div id="reportSummaryCards" class="report-summary-cards"></div>
              <table class="log-table" id="reportTable"><thead></thead><tbody></tbody></table>
          </div>
      </div>
      
      <!-- SETTINGS TAB -->
      <div id="settingsTab" class="tab-content">
        <h1 data-translate="settingsTab">ุงูุฅุนุฏุงุฏุงุช ูุงูุจูุงูุงุช</h1>
        <div class="form-section">
            <h2 data-translate="companySection">ุจูุงูุงุช ุงูุดุฑูุฉ</h2>
            <div class="row">
                <div class="col"><label>ุดุนุงุฑ ุงูุดุฑูุฉ</label><input type="file" id="logoUpload" accept="image/*"><img id="logoPreview" class="logo-upload-preview" src=""></div>
                <div class="col"><label data-translate="sellerName">ุงุณู ุงูุดุฑูุฉ</label><input id="settingSellerName" type="text"></div>
                <div class="col"><label data-translate="sellerTaxNumber">ุงูุฑูู ุงูุถุฑูุจู</label><input id="settingSellerTaxNum" type="text"></div>
                <div class="col"><label data-translate="phone">ุงููุงุชู</label><input id="settingSellerPhone" type="text"></div>
            </div>
            <label style="margin-top:10px; color:var(--accent);">ุงูุนููุงู ุงููุทูู (ูุงูู ุงูุชูุงุตูู)</label>
            <div class="address-grid">
                <input id="setCity" placeholder="ุงููุฏููุฉ">
                <input id="setDistrict" placeholder="ุงูุญู">
                <input id="setStreet" placeholder="ุงูุดุงุฑุน">
                <input id="setBuild" placeholder="ุฑูู ุงููุจูู">
                <input id="setZip" placeholder="ุงูุฑูุฒ ุงูุจุฑูุฏู">
                <input id="setAddNo" placeholder="ุงูุฑูู ุงูุฅุถุงูู">
            </div>
            <div class="actions" style="margin-top: 16px;"><button class="btn success" id="saveSettingsBtn">๐พ ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button></div>
        </div>
        <div class="form-section">
            <h2>ูุณุฎุฉ ุงุญุชูุงุทูุฉ</h2>
            <div class="actions"><button class="btn" id="exportAllBtn">๐พ ุชุตุฏูุฑ</button><div><label for="importAllFile" class="btn secondary">๐ ุงุณุชุนุงุฏุฉ</label><input type="file" id="importAllFile" accept=".xlsx" style="display:none;"></div><button class="btn danger" id="clearAllDataBtn">๐๏ธ ูุณุญ ุงููู</button></div>
        </div>
      </div>
      
      <datalist id="customersDatalist"></datalist>
      <datalist id="suppliersDatalist"></datalist>
      <datalist id="itemsDatalist"></datalist>
    </div>

    <!-- PRINT PREVIEWS -->
    <div class="preview invoice-preview" id="invoicePreview">
        <div class="inv-header">
            <div class="seller-block">
                <img id="printLogo" class="invoice-logo" src="" style="display:none">
                <h2 id="previewSellerName"></h2>
                <div id="previewSellerInfo" class="small"></div>
                <div id="previewSellerAddress" class="small" style="margin-top:4px"></div>
            </div>
            <div class="qr-block"><div id="qrContainer"></div></div>
        </div>
        <h1 class="invoice-title" id="invoiceTitle">ูุงุชูุฑุฉ ุถุฑูุจูุฉ</h1>
        <div id="previewClient" class="preview-client-details"></div>
        <div class="preview-meta"><div class="meta-item"><div class="small">ูุงุชูุฑุฉ ุฑูู:</div><div id="previewInvoiceNo" class="meta-value"></div></div><div class="meta-item"><div class="small">ุงูุชุงุฑูุฎ:</div><div id="previewDate" class="meta-value"></div></div></div>
        <div id="previewItems" class="preview-items-container"></div>
        <div id="previewTotals" class="preview-totals-container"></div>
    </div>

    <div class="preview purchase-preview" id="purchasePreview">
        <div class="inv-header">
            <div class="seller-block"><h2 id="purPreviewSellerName"></h2></div>
        </div>
        <h1 class="invoice-title">ูุงุชูุฑุฉ ูุดุชุฑูุงุช</h1>
        <div id="purPreviewSupplier" class="preview-client-details"></div>
        <div class="preview-meta"><div class="meta-item"><div class="small">ุฑูู ุงููุงุชูุฑุฉ:</div><div id="purPreviewNo" class="meta-value"></div></div><div class="meta-item"><div class="small">ุงูุชุงุฑูุฎ:</div><div id="purPreviewDate" class="meta-value"></div></div></div>
        <div id="purPreviewItems" class="preview-items-container"></div>
        <div id="purPreviewTotals" class="preview-totals-container"></div>
    </div>
    
    <div class="preview receipt-preview" id="receiptPreview">
        <div class="receipt-header">
            <img id="printReceiptLogo" class="invoice-logo" src="" style="display:none">
            <h2 id="receiptPreviewSellerName"></h2>
            <div class="small" id="receiptPreviewSellerInfo"></div>
        </div>
        <h1 class="receipt-title">ุณูุฏ ุชุญุตูู</h1>
        <table class="receipt-details-table">
            <tbody>
                <tr><td class="receipt-label">ุฑูู ุงูุณูุฏ:</td><td id="receiptPreviewNumber"></td></tr>
                <tr><td class="receipt-label">ุงูุชุงุฑูุฎ:</td><td id="receiptPreviewDate"></td></tr>
                <tr><td class="receipt-label">ุงุณุชูููุง ูู:</td><td id="receiptPreviewCustomer"></td></tr>
                <tr><td class="receipt-label">ูุจูุบ ููุฏุฑู:</td><td id="receiptPreviewAmount"></td></tr>
                <tr><td class="receipt-label">ูุฐูู ุนู:</td><td id="receiptPreviewDesc"></td></tr>
                <tr><td class="receipt-label">ุทุฑููุฉ ุงูุฏูุน:</td><td id="receiptPreviewPayment"></td></tr>
            </tbody>
        </table>
        <div class="receipt-signatures"><div><strong>ุงููุณุชูู: ....................</strong></div><div><strong>ุงูุฎุชู:</strong></div></div>
    </div>
    
    <div class="statement-preview" id="statementPreview">
        <div class="statement-header">
            <img id="printStatementLogo" class="invoice-logo" src="" style="display:none">
            <h2 id="statementSellerName"></h2>
        </div>
        <h1 style="text-align:center; margin:20px 0;">ูุดู ุญุณุงุจ</h1>
        <div id="statementClientInfo" class="statement-client-info"></div>
        <table class="log-table"><thead><tr><th>ุงูุชุงุฑูุฎ</th><th>ุงูุจูุงู</th><th>ูุฏูู</th><th>ุฏุงุฆู</th><th>ุงูุฑุตูุฏ</th></tr></thead><tbody id="statementTableBody"></tbody></table>
        <div id="statementSummary" class="statement-summary"></div>
    </div>
  </div>
</div>
<script src="main.js"></script>
</body>
</html>
